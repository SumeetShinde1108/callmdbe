{% extends 'base/base.html' %}

{% block title %}Permissions - CallFairy{% endblock %}

{% block content %}
<div class="mb-6">
    <h1 class="text-3xl font-bold text-gray-900">
        <i class="fas fa-key mr-2"></i>System Permissions
    </h1>
    <p class="text-gray-600 mt-2">{{ total_permissions }} permissions available in the system</p>
</div>

{% for category, perms in permission_groups.items %}
<div class="bg-white rounded-lg card-shadow p-6 mb-6">
    <h2 class="text-xl font-bold text-gray-900 mb-4">
        <i class="fas {% if category == 'Users' %}fa-users{% elif category == 'Organisations' %}fa-building{% elif category == 'Reports' %}fa-chart-bar{% elif category == 'Calls' %}fa-phone{% elif category == 'Contacts' %}fa-address-book{% else %}fa-cog{% endif %} mr-2"></i>
        {{ category }} ({{ perms|length }})
    </h2>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {% for perm in perms %}
        <div class="border rounded-lg p-4 {% if category == 'System' %}bg-red-50 border-red-200{% else %}bg-gray-50 border-gray-200{% endif %}">
            <div class="flex items-start justify-between mb-2">
                <h3 class="font-medium text-gray-900">{{ perm.name }}</h3>
                {% if category == 'System' %}
                <i class="fas fa-lock text-red-600"></i>
                {% endif %}
            </div>
            <p class="text-xs text-gray-500 mb-2"><code>{{ perm.key }}</code></p>
            {% if perm.description %}
            <p class="text-sm text-gray-600">{{ perm.description }}</p>
            {% endif %}
            {% if category == 'System' %}
            <div class="mt-2 text-xs font-medium text-red-700">
                <i class="fas fa-crown mr-1"></i> SuperAdmin Only
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{% endfor %}

<div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
    <h3 class="font-medium text-blue-900 mb-2">
        <i class="fas fa-info-circle mr-1"></i> About Permissions
    </h3>
    <div class="text-sm text-blue-800 space-y-2">
        <p><strong>SuperAdmin:</strong> Has ALL permissions automatically (no need to grant)</p>
        <p><strong>Agents:</strong> Must be granted permissions explicitly by SuperAdmin</p>
        <p><strong>Regular Users:</strong> Have no permissions (read-only access to member organisations)</p>
        <p><strong>System Permissions:</strong> Marked with ðŸ”’ can NEVER be granted to agents</p>
    </div>
</div>
{% endblock %}
